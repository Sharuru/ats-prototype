<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ATS*P - TOP</title>
    <th:block th:include="fragments/common :: head"/>
</head>
<body>
<div style="padding: 1rem;">
    <div class="jumbotron">
        <h1 class="display-4">ATS*P</h1>
        <p class="lead">Auto Task Scheduler - Prototype Version</p>
    </div>
    <div>
        <div class="row">
            <div class="col-12">
                <div class="list-group list-group-horizontal" id="list-tab" role="tablist">
                    <a class="list-group-item list-group-item-action" id="card-home-card" data-toggle="list" href="#card-home" role="tab">Home</a>
                    <a class="list-group-item list-group-item-action" id="card-resources-card" data-toggle="list" href="#card-resources" role="tab">Resources</a>
                    <a class="list-group-item list-group-item-action" id="card-tasks-card" data-toggle="list" href="#card-tasks" role="tab">Tasks</a>
                    <a class="list-group-item list-group-item-action active" id="card-gantt-card" data-toggle="list" href="#card-gantt" role="tab">Gantt</a>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top: 1rem;">
            <div class="col-12">
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade" id="card-home" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h1>Welcome!</h1>
                                <p>
                                    Some introduction here...
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="card-resources" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h1>Resource Administration</h1>
                                <p>
                                    CRUD resources and arrange cost here...
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="card-tasks" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h1>Task Administration</h1>
                                <p>
                                    CRUD tasks here...
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="card-gantt" role="tabpanel">
                        <div class="card">
                            <div class="card-body show active">
                                <h1>Gantt Graph</h1>
                                <p>
                                    Show gantt graph here...
                                </p>
                                <div id="gantt-graph" style="width:100%; height:100%;">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $("#card-gantt").tab("show");

    var tasks = {
        data: [
            {
                id: 1, text: "Project #1", start_date: "2018-04-01", duration: 18, order: 10,
                progress: 0.4, open: true
            },
            {
                id: 2, text: "Task #1 Design", start_date: "2018-04-01", duration: 6, order: 10,
                progress: 0.6, parent: 1
            },
            {
                id: 3, text: "Task #2 Development", start_date: "2018-04-07", duration: 6, order: 20,
                progress: 0.6, parent: 1
            },
            {
                id: 4, text: "Task #3 Unit Test", start_date: "2018-04-13", duration: 6, order: 20,
                progress: 0.6, parent: 1
            }
        ],
        links: [
            {id: 1, source: 1, target: 2, type: "1"},
            {id: 2, source: 2, target: 3, type: "0"},
            {id: 3, source: 3, target: 4, type: "0"}
        ]
    };
    gantt.config.xml_date = "%Y-%m-%d";
    gantt.config.task_date = "%Y-%m-%d";
    gantt.config.autosize = "y";
    gantt.config.readonly = true;
    // XXX 'resize' is available in PRO only
    gantt.config.columns =  [
        {name:"text",       label:"Task name",  resize:true, tree:true,      min_width:220},
        {
            name:"resources",  label:"Resource",   resize:true, align:"center", min_width:90,
            template: function(obj){
                return "Cost < " + obj.duration;
            }
        },
        {name:"start_date", label:"Start time", resize:true, align:"center", min_width:90},
        {name:"end_date",   label:"End date",   resize:true, align:"center", min_width:90},
        {name:"duration",   label:"Duration",   resize:true, align:"center", min_width:70},
        {name:"add",        label:"",           resize:true, min_width:50 }
    ];
    gantt.init("gantt-graph");
    gantt.parse(tasks);
</script>
</body>
</html>
